<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Part number: Ennnnn-01 -->
    <!-- Published date: Month Year -->
    <!-- Template date: October 15, 2018 -->
    <!-- Put the content ID of this OBE between the empty quotation marks for 'content' below -->
    <meta name="contentid" content="">
    <meta content="text/html; charset=utf-8" http-equiv="content-type">
    <!-- The title below is displayed on the browser tab, in search results, and in  history. It can be longer than the tutorial title in the <h1> element, below.-->
    <!-- Use an imperative verb in the title. -->
    <title>Custom Component Service Local Debugging</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="robots" content="INDEX, FOLLOW">
    <meta name="description" content="Put the description of the tutorial here.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/normalize.min.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/obe-lite.css">
    <script src="js/jquery-1.11.0.min.js"></script>
    <script src="js/jquery-ui-1.10.4.custom.js"></script>
    <script src="js/jquery.tocify.jd.js"></script>
    <script src="js/leftnav.js"></script>
</head>

<body>
    <header>
        <div class="w1024" style="min-height:55px; display:block;">
            <a href="https://docs.oracle.com" class="oracle-logo"> <img src="img/oracle_doc_logo.png" alt="Oracle Documentation" style="max-width: none;" height="22" width="236"></a>
        </div>
    </header>
    <!--end header-->
    <div id="content">
        <!-- The title below is displayed as the title at the top of the OBE page. It can be shorter than the title in the <title> element, above. -->
        <!-- Use an imperative verb in the title. -->
        <h1><img src="img/obe_tag.png" align="middle" alt="Oracle by Example branding">Custom Component Service Local Debugging</h1>
        <div class="w1024" style="clear:both; position:relative; margin-top:40px;">
            <div class="navbackwide border-right">
                <!-- -->
            </div>
            <div id="shownav" title="Show Navigation" tabindex="0"><span class="fa fa-list"></span></div>
            <div id="sidebar">
                <!-- -->
                <div class="left-nav-tut">
                    <!-- -->
                    <div id="hidenavw" title="Hide Navigation" tabindex="0"><span class="fa fa-close"></span></div>
                    <div id="navbar" class="left-nav-w">
                        <!-- -->
                        <div id="toc" class="tocify">
                            <!-- -->
                        </div>
                    </div>
                </div>
            </div>
            <div id="bookContainer">
                <article>
                    <p class="MsoNormal" style="text-align:justify"><span style="mso-ansi-language:EN-US" lang="EN-US"><b>
                                <font size="+1">Tutorial by Frank Nimphius, Oracle</font>
                            </b>
                            <br>
                            May 2019, Oracle Digital Assistant version 19.1.3<br>
                        </span></p>
                    <p style="text-align:justify">Custom components for Oracle Digital Assistant are developed using JavaScript and Node.js. In this tutorial you learn how to debug custom component services in the context of a bot conversation in Oracle Dgital Assistant.</p>
                    <section>
                        <h2><img src="img/32_begin.png" alt="section 0" height="32" width="32" class="num_circ">Before You Begin</h2>
                        <p style="text-align:justify">Follow the instructions in this tutorial to debug a custom component that provides bot users with a quote of the day. In particular, you learn</p>
                        <ul>
                            <li style="text-align:justify">How to run custom components in the Oracle Bots Node.js SDK local Node express server.</li>
                            <li style="text-align:justify">How to register custom components executed in a local Node express server to Oracle Digital Assistant.</li>
                            <li style="text-align:justify">How to connect the Microsoft Visual Studio Code JavaScript IDE to the custom component local container.</li>
                            <li style="text-align:justify">How to debug a custom component in the context of a bot conversation.</li>
                        </ul>
                        <h3>What Do You Need?</h3>
                        <p style="text-align:justify">This tutorial is for developers that are familiar with JavaScript and Node.js development. To complete this tutorial, the following prerequisites must be met</p>
                        <ul>
                            <li style="text-align:justify">You need access to Oracle Digital Assistant.</li>
                            <li style="text-align:justify">For this tutorial, you should be familiar with the development of custom components. If you are new to custom components, please first complete the <a href="../componentDevelopment_032019/index.html" target="_blank"><b>Custom Component Development and Backend Integration</b></a> tutorial.</li>
                            <li style="text-align:justify">You need a JavaScript IDE installed that supports Node debugging. For example, this tutorial uses <a href="https://code.visualstudio.com" target="_blank"><b>Microsoft Visual Studio Code</b></a> in its screen shots.</li>
                            <li style="text-align:justify">You must have <a href="https://nodejs.org/en/" target="_blank"><b>Node.js</b></a> and Node Package Manager (NPM) installed for global access. If you used a Node installer (Windows, Mac) both executables, <i>node</i> and <i>npm</i> should be available to you. To test if you have Node.js and NPM installed, open a terminal window and try the following commands seperately: <code>node -v</code>, <code>npm -v</code></li>
                            <li style="text-align:justify">Download the <a href="files/QuoteOfTheDaySkill(1.0).zip" target="_blank"><b>QuoteOfTheDaySkill(1.0).zip</b></a> skill.</li>
                            <li style="text-align:justify">Download the <a href="./files/quoteoftheday.zip" target="_blank"><b>quoteoftheday.zip</b></a> file containing the custom component sources.</li>
                        </ul>
                    </section>
                    <!-- ========================================================================================================================= -->
                    <hr>
                    <section>
                        <h2 id="section_1" role="button" style="text-align: left;"><img src="img/32_1.png" alt="section 1" height="32" width="32" class="num_circ">Importing Or Cloning The Quote Of The Day Skill</h2>
                        <p style="text-align:justify">The provided <i>'Quote Of The Day Skill'</i> skill hosts the custom component. You use the skill to explore the custom component functionality and during debugging. If you work in your own Oracle Digital Assistant instance, you need to import the provided skill. In a common environment such as training, the skill may already be there. In this case we recommend to clone the skill as explained in the nex section.</p>
                        <h3>If in your own environment: Importing the skill</h3>
                        <p style="text-align:justify"></p>
                        <ol>
                            <li style="text-align:justify">If the tester skill does not exist, <a href="files/QuoteOfTheDaySkill(1.0).zip"><b>select this link</b></a> to download the <b>QuoteOfTheDaySkill(1.0).zip></b> skill.</li>
                            <li style="text-align:justify">Open the Oracle Digital Assistant dashboard in a browser using the following URL <b>&lt;your instance url&gt;/botsui</b>.</li>
                            <li style="text-align:justify">Select the menu icon at the top-left of the page next to the "Oracle Digital Asisstant" label (<img src="img/hamburger.png" alt="menu icon">). </li>
                            <li style="text-align:justify">Select the <b>Skills</b> option in the <b>Development</b> category.
                                <br>
                                <figure><img src="img/image_001.png" alt="Main Menu"></figure>
                            </li>
                            <li style="text-align:justify">Again, <b>click</b> on the menu icon at the top-left of the page to close the menu (<img src="img/hamburger.png" alt="menu icon">).</li>
                            <li style="text-align:justify">Click the <b>Import Skills</b> button on the top right (<img src="img/importSkillButton.png" height="25" alt="import skill button">).</li>
                            <li style="text-align:justify">On your computer, <b>browse</b> to the location you saved the downloaded <b>QuoteOfTheDaySkill(1.0).zip</b> file to.</li>
                            <li style="text-align:justify">Select the <b>QuoteOfTheDaySkill(1.0).zip</b> file and click <b>Open</b> to upload and install the <i>"Quote Of The Day Skill"</i> skill bot.</li>
                            <li style="text-align:justify">Locate the <b>"Quote Of The Day Skill"</b> skill and open it by clicking on the <i>"Quote Of The Day Skill"</i> tile.
                                <br>
                                <br><b>Note:</b> If you cannot find the "Quote Of The Day Skill" skill, then try and use the filter field above the <i>New Skill</i> tile to find it. </li>
                        </ol>
                        <h3>If in a shared environment: Cloning the tester skill</h3>
                        <p style="text-align:justify"><b>If you follow this tutorial in a shared Oracle Digital Assistant instance</b>, like in a training, you should check first if the <i>"Quote Of The Day Skill"</i> skill exists. If it does, <b>clone</b> the skill instead of importing it. The reason is that you can import a skill with a specific name only once.</p>
                        <ol>
                            <li style="text-align:justify">Open the Oracle Digital Assistant dashboard in a browser the following URL <b>&lt;your instance url&gt;/botsui.</b></li>
                            <li style="text-align:justify">Select the menu icon at the top-left of the page next to the "Oracle Digital Asisstant" label (<img src="img/hamburger.png" alt="menu icon">). </li>
                            <li style="text-align:justify">Select the <b>Skills</b> option in the <b>Development</b> category.
                                <br>
                                <figure><img src="img/image_001.png" alt="Main Menu"></figure>
                            </li>
                            <li style="text-align:justify"><b>Click</b> on the menu icon at the top-left of the page to close the menu (<img src="img/hamburger.png" alt="menu icon">).
                                <li style="text-align:justify">If you cannot spot the <i>"Quote Of The Day Skill"</i> skill, try and use the filter field above the <i>'New Skill'</i> tile to find it. If still you cannot find it, import the skill as explained in the previous section.</li>
                                <li style="text-align:justify">To clone the "Quote Of The Day Skill" skill, use the <b>Clone</b> menu option of the <b>"Quote Of The Day Skill"</b> skill shown in the image below.
                                    <br>
                                    <figure><img src="img/skill_01.png" alt="Cloning a skill"></figure>
                                    <br> </li>
                                <li style="text-align:justify">In the opened dialog, provide a display name with your initials in it (e.g. "FN Quote Of The Day Skill").
                                    <br>
                                    <figure><img src="img/skill_02.png" alt="Cloning the skill" width="100%" height="100%"></figure>
                                </li>
                                <li style="text-align:justify">Provide a short description.</li>
                                <li style="text-align:justify">Click the <b>Create</b> button to create the skill.</li>
                        </ol>
                    </section>
                    <hr>
                    <section>
                        <h2 id="section_2" role="button" style="text-align: left;"><img src="img/32_2.png" alt="section 2" height="32" width="32" class="num_circ">Exploring The Quote Of The Day Skill</h2>
                        <ol>
                            <li style="text-align:justify">Open the <i>"Quote Of the Day Skill" skill (or your cloned copy).</i></li>
                            <li style="text-align:justify">Select the conversation tester icon (<img alt="conversation tester" src="img/testerIcon.png" height="25" />)</li>
                            <li style="text-align:justify">Type <b>hi</b> into the <b>Message</b> field and press the enter-key on your keyboard.</li>
                            <li style="text-align:justify">When prompted, provide your name.</li>
                            <li style="text-align:justify">You should see a message similar to the one below:
                                <br>
                                <figure><img src="img/tester_01.png" alt="Tester" width="100%" height="100%"></figure>
                            </li>
                            <li style="text-align:justify">Notice that, though a name was provided, the message prints <b>undefined</b> instead of the name.</li>
                            <li style="text-align:justify">Reset the tester (<img alt="Reset link" src="./img/resetLink.png" height="25" />).</li>
                            <li style="text-align:justify">Close the tester (<img alt="Close button" src="./img/closeButton.png" height="25" />).</li>
                            <li style="text-align:justify">Open the dialog flow builder (<img alt="Dialog flow editor" src="./img/dialogEditor.png" height="25" />)</li>
                            <li style="text-align:justify">Note the <b>askName</b> state (line 11) that prompts the user for a name.</li>
                            <li style="text-align:justify">The <b>getQuote</b> state (line 16) passes the provided user name as an input argument to the custom component.
                                <br>
                                <br> <b>Note:</b> The dialog flow code appears to be correct. So the problem that the "quote of the day" message does not print the provided name must be within the custom component.</li>
                            <li style="text-align:justify">Open the <b>Components</b> panel (<img alt="Custom component icon" src="./img/csutcomp_icon2.png" height="25" />).</li>
                            <li style="text-align:justify">Notice the locally deployed custom component:
                                <br>
                                <figure><img src="img/customComponent_01.png" alt="Custom component" width="100%" height="100%"></figure>
                            </li>
                        </ol>
                    </section>
                    <hr>
                    <section>
                        <h2 id="section_3" role="button" style="text-align: left;"><img src="img/32_3.png" alt="section 3" height="32" width="32" class="num_circ">Running The Custom Component On Your Local Computer</h2>
                        <p style="text-align:justify">To be able to debug the custom component, you first need to run it on your local machine. This way you later have a local process you can connect to from Microsoft Visual Studio Code IDE, or whatever your preferred JavaScript IDE is. The full custom component service source code is provided in the <a href="./files/quoteoftheday.zip"><b>quoteoftheday.zip</b></a> file you downloaded as a pre-requisite for this tutorial.</p>
                        <ol>
                            <li style="text-align:justify">On your computer, <b>browse</b> to the location you saved the downloaded <b>quoteoftheday.zip</b> custom component service file to.<br>
                            <figure><img src="img/terminal_01.png" alt="Location of the unzipped component file" width="100%" height="100%"></figure><br></li>
                            <li style="text-align:justify"><b>Unzip</b> the file in a folder that does not have blank characters in its directory path.</li>
                            <li style="text-align:justify"><b>In a terminal window</b>, navigate into the parent folder containing the <b>quoteoftheday</b> folder</li>
                            <li style="text-align:justify">If not done already, install the Oracle Bots Node.js SDK:<br>
                                <ul>
                                    <li style="text-align:justify">If your Internet access is through a proxy, do the following to be able to access the Oracle Bots Node.js SDK from the Internet:
                                        <br>
                                        <br>
                                        <ul>
                                            <li style="text-align:justify">In a browserm get the external IP address of your proxy (<a href="http://www.whatismyproxy.com/" target="_blank"><b>http://www.whatismyproxy.com/</b></a>)</li>
                                            <li style="text-align:justify">In the terminal window type:
                                                <br><br> <code>npm config set proxy http://external_ip:80</code>
                                                <br> <code>npm config set https-proxy http://external_ip:80</code>
                                                <br><br> <b>Note: </b>Alternatively find a way to access the Internet not using a proxy, e.g. using a mobile hotspot. </li>
                                        </ul>
                                    </li>
                                    <li style="text-align:justify">To install Oracle Bots Node.js SDK for global access on your laptop, type
                                        <br>
                                        <br><code>npm install -g @oracle/bots-node-sdk</code>
                                        <br>
                                        <br> <b>Note:</b> On a Mac, you use the <i>sudo</i> command: <code>sudo npm install -g @oracle/bots-node-sdk</code> </li>
                                    <li style="text-align:justify">To verify the success of your installation, type <code>bots-node-sdk -v</code>. The command should print the Oracle Bots Node.js SDK version.</li>
                                </ul>
                            </li>
                            <li style="text-align:justify">Ensure you followed previous instructions and your terminal window cursor is in the folder that hosts the <b>quoteoftheday</b> custom component service folder.</li>
                            <li style="text-align:justify">Issue the following command: <code>bots-node-sdk service quoteoftheday</code>
                            <br><figure><img src="img/terminal_02.png" alt="Starting the component service" width="100%" height="100%"></figure><br>
                            <b>Note: </b> The <code>bots-node-sdk service quoteoftheday</code> command starts the Oracle Bots Node.js SDK embedded Node express server to run the custom component. The express server is part of the custom component service project. It is added when following the custom component development instructions documented in the <a href="../componentDevelopment_032019/index.html" target="_blank"><b>Custom Component Development and Backend Integration </b></a>tutorial.
                            </li>
                            <li style="text-align:justify">Open a browser window.</li>
                            <li style="text-align:justify">Type the following URL into the URL field: <code>localhost:3000/components</code></li>
                            <li style="text-align:justify">You should see a server response as shown in the image below:<br>
                            <figure><img src="img/browser_01.png" alt="Express server test showing component details" width="100%" height="100%"></figure><br>
                                <b>Note: </b>What you see is the custom component metadata definition. Its the infromation Oracle Digital Assistant reads when registering custom component services in a skill. To you this proves that the Node express server is up and that the custom component is accessible. <br><br>By default, the Node express server listens on port 3000. You can change the port number by using the following command: <code>bots-node-sdk service quoteoftheday --port port_number</code>. <br><br> For example, use <code>bots-node-sdk service quoteoftheday --port 4000</code> to start the Node express server on port 4000
                            </li>
                        </ol>
                    </section>
                    <hr>
                    <section>
                        <h2 id="section_4" role="button" style="text-align: left;"><img src="img/32_4.png" alt="section 4" height="32" width="32" class="num_circ">Exposing The Local Custom Component Service To The Internet</h2>
                        <p style="text-align:justify">Usually your local machine is not exposed as a server to the Internet. For this you need to create a network tunnel, for which in this tutorial you will use ngrok. In this section, the assumption is that the custom component service Node express server listens to port 3000.</p>
                        <ol>
                            <li style="text-align:justify">Download an install <a href="https://ngrok.com/download" target="_blank"><b>ngrok</b></a>. You don't need an account or a subscription to follow the instructions in this tutorial.<br><br>
                            <b>Note:</b> If ngrok doesn't work for you, you may try other tunnelling solutions like <a href="https://github.com/localtunnel/localtunnel" target="_blank">localtunnel on GitHub</a>. If you don't own your local machine and if your IT administrators don't allow the use of tunneling software on your machine, then, unfortunately, you cannot complete this tutorial. Internet access to the local Node express server is required to run a debugging session from Oracle Digital Assistant. In this case, logging is the option for you to debug custom component services.</li>
                            <li style="text-align:justify">Navigate to the location you installed <b>ngrok</b> to.</li>
                        </ol>
                    </section>
                    <hr>
                    <section>
                        <h2 id="section_5" role="button" style="text-align: left;"><img src="img/32_5.png" alt="section 5" height="32" width="32" class="num_circ">Referencing The Custom Component From The Skill</h2>
                        <ol>
                            <li style="text-align:justify">...</li>
                            <li style="text-align:justify">...</li>
                        </ol>
                    </section>
                    <hr>
                    <section>
                        <h2 id="section_6" role="button" style="text-align: left;"><img src="img/32_6.png" alt="section 6" height="32" width="32" class="num_circ">Configuring Microsoft Visual Studio Code</h2>
                        <ol>
                            <li style="text-align:justify">...</li>
                            <li style="text-align:justify">...</li>
                        </ol>
                    </section>
                    <hr>
                    <section>
                        <h2 id="section_7" role="button" style="text-align: left;"><img src="img/32_7.png" alt="section 7" height="32" width="32" class="num_circ">Debugging The Custom Component</h2>
                        <ol>
                            <li style="text-align:justify">...</li>
                            <li style="text-align:justify">...</li>
                        </ol>
                    </section>
                    <hr>
                    <section>
                        <h2 id="section_8" role="button" style="text-align: left;"><img src="img/32_8.png" alt="section 8" height="32" width="32" class="num_circ">Deploying The Debugged Custom Component</h2>
                        <ol>
                            <li style="text-align:justify">...</li>
                            <li style="text-align:justify">...</li>
                        </ol>
                    </section>
                    <hr> </article>
            </div>
            <br class="clearfloat"> </div>
    </div>
    <!--close main-->
    <!--end content-->
    <div class="footer-container ">
        <div style="max-width: 994px; padding:10px 0 0 17px;">
            <footer class="footer-list">
                <ul>
                    <li> <a href="https://www.oracle.com/corporate/index.html" target="_blank">About Oracle</a> </li>
                    <li> <a href="https://www.oracle.com/us/corporate/contact/index.html" target="_blank">Contact Us</a> </li>
                    <li> <a href="https://www.oracle.com/us/legal/index.html" target="_blank">Legal Notices</a> </li>
                    <li> <a href="https://www.oracle.com/us/legal/terms/index.html" target="_blank">Terms of Use</a> </li>
                    <li> <a href="https://www.oracle.com/us/legal/privacy/index.html" target="_blank">Your Privacy Rights</a> </li>
                    <li> <a href="https://www.oracle.com/pls/topic/lookup?ctx=cpyr&id=en">Copyright © 2018, Oracle and/or its affiliates. All rights reserved.</a></li>
                </ul>
            </footer>
        </div>
        <script type="text/javascript" src="https://www.oracleimg.com/us/assets/metrics/ora_docs.js"></script>
    </div>
    <!-- OBE Dialog Box code 10/15/2018 -->
    <!-- DO NOT ALTER THE CODE BELOW   -->
    <div id="lpModal" class="modal">
        <!-- Modal hdr and body -->
        <div id="obe_dialog" class="modal-content">
            <div class="modal-header">
                <a href="#" class="close"> <span class="close">&times;</span> </a>
                <h1>Associated Learning Paths</h1> </div>
            <div id="dialog-content"> </div>
            <div id="dialog-close" class="closeBtn">
                <a href="#" class="close2">
                    <p class="close2"> <span>&nbsp;&nbsp;View&nbsp;&nbsp;</span> </p>
                </a>
            </div>
        </div>
    </div>
    <!-- END OBE Dialog Box code -->
</body>

</html>