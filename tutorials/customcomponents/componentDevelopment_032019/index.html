<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Part number: Ennnnn-01 -->
    <!-- Published date: Month Year -->
    <!-- Template date: October 15, 2018 -->
    <!-- Put the content ID of this OBE between the empty quotation marks for 'content' below -->
    <meta name="contentid" content="">
    <meta content="text/html; charset=utf-8" http-equiv="content-type">
    <!-- The title below is displayed on the browser tab, in search results, and in  history. It can be longer than the tutorial title in the <h1> element, below.-->
    <!-- Use an imperative verb in the title. -->
    <title>Custom Component Development and Backend Integration</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="robots" content="INDEX, FOLLOW">
    <meta name="description" content="Put the description of the tutorial here.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/normalize.min.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/obe-lite.css">
    <script src="js/jquery-1.11.0.min.js"></script>
    <script src="js/jquery-ui-1.10.4.custom.js"></script>
    <script src="js/jquery.tocify.jd.js"></script>
    <script src="js/leftnav.js"></script>
</head>

<body>
    <header>
        <div class="w1024" style="min-height:55px; display:block;">
            <a href="https://docs.oracle.com" class="oracle-logo"> <img src="img/oracle_doc_logo.png" alt="Oracle Documentation" style="max-width: none;" height="22" width="236"></a>
        </div>
    </header>
    <!--end header-->
    <div id="content">
        <!-- The title below is displayed as the title at the top of the OBE page. It can be shorter than the title in the <title> element, above. -->
        <!-- Use an imperative verb in the title. -->
        <h1><img src="img/obe_tag.png" align="middle" alt="Oracle by Example branding">Custom Component Development and Backend Integration</h1>
        <div class="w1024" style="clear:both; position:relative; margin-top:40px;">
            <div class="navbackwide border-right">
                <!-- -->
            </div>
            <div id="shownav" title="Show Navigation" tabindex="0"><span class="fa fa-list"></span></div>
            <div id="sidebar">
                <!-- -->
                <div class="left-nav-tut">
                    <!-- -->
                    <div id="hidenavw" title="Hide Navigation" tabindex="0"><span class="fa fa-close"></span></div>
                    <div id="navbar" class="left-nav-w">
                        <!-- -->
                        <div id="toc" class="tocify">
                            <!-- -->
                        </div>
                    </div>
                </div>
            </div>
            <div id="bookContainer">
                <article>
                    <p class="MsoNormal" style="text-align:justify"><span style="mso-ansi-language:EN-US" lang="EN-US"><b>
                                <font size="+1">Tutorial by Frank Nimphius, Oracle</font>
                            </b>
                            <br>
                            March 2019, Oracle Digital Assistant version 19.1.3<br>
                        </span></p>
                    <p style="text-align:justify">Custom components are reusable units of custom code that are added to skills in Oracle Digital Assistant to be executed at runtime in the context of a user-bot conversation. From a bot design perspective, there is no difference between a custom component you build and system components provided by Oracle Digital Assistant.</p>
                    <p style="text-align:justify"> Integrating remote backend systems to a chatbot conversation is the most common usecase for developers to build custom components in Oracle Digital Assistant. You develop custom components using JavaScript and <a href="https://nodejs.org/en/" target="_blank"><b>Node.js</b></a>. </p>
                    <p style="text-align:justify">In this tutorial you learn how to build custom components for deployment to Oracle Digital Assistant's local Node container.</p>
                    <section>
                        <h2><img src="img/32_begin.png" alt="section 0" height="32" width="32" class="num_circ">Before You Begin</h2>
                        <p style="text-align:justify">Following the instructions in this tutorial, you will create a custom component that integrates currency conversion functionality into a bot conversation. In particular, you learn</p>
                        <ul>
                            <li style="text-align:justify">How to start a new custom component service project using the Oracle Bots Node.js SDK.</li>
                            <li>How to define the custom component's name, input parameters and returned actions.</li>
                            <li style="text-align:justify">How to implement logging.</li>
                            <li style="text-align:justify">How to invoke a remote REST services.</li>
                            <li style="text-align:justify">How to deploy custom component services to skills in Oracle Digital Assistant.</li>
                        </ul>
                        <h3>What Do You Need?</h3>
                        <p>This tutorial is for developers that are familiar with JavaScript and Node.js development. To complete this tutorial, the following prerequites must be met</p>
                        <ul>
                            <li>You need to have access to Oracle Digital Assistant</li>
                            <li>You need a JavaScript IDE installed. For example, this tutorial uses <a href="https://code.visualstudio.com" target="_blank"><b>Microsoft Visual Studio Code</b></a> in its screen shots. If you feel comfortable using a text editor, then this is fine too. </li>
                            <li style="text-align:justify">You must have <a href="https://nodejs.org/en/" target="_blank"><b>Node.js</b></a> and Node Package Manager (NPM) installed for global access. If you used a Node installer (Windows, MAC) both executables, <i>node</i> and <i>npm</i> should be available to you. To test if you have Node.js and NPM installed, open a terminal window and try the following commands seperately: <code>node -v</code>, <code>npm -v</code></li>
                            <li style="text-align:justify">Download the <a href="files/CurrencyConverterTester(1.0).zip" target="_blank"><b>CurrencyConverterTester(1.0).zip</b></a> teser skill.</li>
                        </ul>
                    </section>
                    <!-- ========================================================================================================================= -->
                    <section>
                        <hr>
                        <h2 id="section_1" role="button" style="text-align: left;"><img src="img/32_1.png" alt="section 1" height="32" width="32" class="num_circ">Installing the Oracle Bots Node.js SDK</h2>
                        <p style="text-align:justify">The Oracle Bots Node.js SDK is a Node module provided and maintained by Oracle to build and deploy custom component services for Oracle Digital Assistant. You can read up about the Oracle Bots Node.js SDK on <a href="https://github.com/oracle/bots-node-sdk" target="_blank"><b>GitHub</b></a> and the <a href="https://www.npmjs.com/package/@oracle/bots-node-sdk" target="_blank"><b>Node Package Manager</b></a> website.</p>
                        <p style="text-align:justify">Follow below steps to install the Oracle Node.js Bots SDK to your local machine.</p>
                        <ol>
                            <li style="text-align:justify">Open a terminal window.</li>
                            <li style="text-align:justify">If your Internet access is through a proxy, you may need to do the following in the terminal window to be able to install the Oracle Bots Node.js SDK from the Internet:<br><br>
                                <ul>
                                    <li style="text-align:justify">Get the external IP address of your proxy (<a href="http://www.whatismyproxy.com/" target="_blank"><b>http://www.whatismyproxy.com/</b></a>)</li>
                                    <li style="text-align:justify">In the terminal window type:
                                        <br>
                                        <br> <code>npm config set proxy http://external_ip:80</code>
                                        <br> <code>npm config set https-proxy http://external_ip:80</code><br>
                                        <br> </li>
                                </ul>
                            </li>
                            <li style="text-align:justify">To install Oracle Bots Node.js SDK for global access on your laptop, type
                                <br>
                                <br><code>npm install -g @oracle/bots-node-sdk</code>
                                <br>
                                <br> <b>Note:</b> On a MAC, you use the <i>sudo</i> command: <code>sudo npm install -g @oracle/bots-node-sdk</code> </li>
                            <li style="text-align:justify">To verify the success of your installation, type <code>bots-node-sdk -v</code>. The command should print the Oracle Bots Node.js SDK version.</li>
                        </ol>
                    </section>
                    <hr>
                    <section>
                        <h2 id="section_2" role="button" style="text-align: left;"><img src="img/32_2.png" alt="section 2" height="32" width="32" class="num_circ">Requesting a fixer.io Currency Converter API Key</h2>
                        <p style="text-align:justify">The "Fixer" website, <a href="https://fixer.io" target="_blank"><b>fixer.io</b></a>, offers current and historic exchange rates for up to 170 currencies. To complete this tutorial, you need a free subscription that allows you to access current conversion rates.</p>
                        <ol>
                            <li style="text-align:justify">Click <a href="https://fixer.io" target="_blank"><b>this link</b></a> to navigate to the fixer.io website</li>
                            <li style="text-align:justify">Click on the <b>GET FREE API KEY</b> link in the upper right corner.
                                <br>
                                <figure><img src="img/fixerio_1.png" alt="GET FREE API KEY button" width="70%" height="70%"></figure>
                                <br>
                            </li>
                            <li style="text-align:justify">Click the <b>GET FREE API KEY</b> button
                                <br>
                                <figure><img src="img/fixerio_2.png" alt="Get free API key" width="70%" height="70%"></figure>
                                <br>
                            </li>
                            <li style="text-align:justify">Complete the registration form.</li>
                            <li style="text-align:justify">Copy and save the free API key displayed in the confirmation page.
                                <br>
                                <figure><img src="img/fixerio_3.png" alt="Fixer IO Confirmation page" width="70%" height="70%"></figure>
                            </li>
                        </ol>
                        <p style="text-align:justify"><b>Note: </b>The free API key does come with restrictions. For example, the conversion rates are updated less frequent. In addition, the base currency is Euro (EUR). The latter restriction can be handled in the custom component code so that users can use any currency as the base currency. Also, requests can only be made using HTTP (no HTTPS)</p>
                    </section>
                    <hr>
                    <section>
                        <h2 id="section_3" role="button" style="text-align: left;"><img src="img/32_3.png" alt="section 3" height="32" width="32" class="num_circ">Creating the Custom Component Service</h2>
                        <p style="text-align:justify">To create a new custom component service project, you use the Oracle Bots Node.js SDK command line interface you installed implicitly when installing the Oracle Node.js SDK. The Oracle Bots Node.js SDK provides all the infrastructure and tools you need to test, debug and deploy custom component services.</p>
                        <h3>Getting started</h3>
                        <ol>
                            <li style="text-align:justify">On the file system, create a new folder that you name <b>converterccs</b>. Ensure the <i>converterccs</i> folder is located in a directory path that does contain blanks. E.g., on Windows, don't create the <i>convertercss</i>in the "Program Files" folder.
                            <li style="text-align:justify">Open a terminal window and navigate into the <b>converterccs</b> folder
                                <br>
                                <figure><img src="img/terminal_1.png" alt="terminal window"></figure>
                            </li>
                            <li style="text-align:justify">In the <b>converterccs</b> folder, type the following commands and press the <i>enter-key</i> on your keyboard after each
                                <br>
                                <ul>
                                    <li style="text-align:justify"><code>npm init -y</code></li>
                                    <li style="text-align:justify"><code>npm install -save @oracle/bots-node-sdk</code></li>
                                    <li style="text-align:justify"><code>bots-node-sdk init --component-name CurrencyConverter</code></li>
                                </ul>
                            </li>
                        </ol>
                        <p style="text-align:justify"><b>What you just did: </b> Following the instructions in this section, you created a new node project (npm init -y) in which you installed the Oracle Bots Node.js SDK. You then used the Oracle Bots Node.js command line to create your first custom component: "CurrencyConverter". Your custom component service folder structure looks as shown in the image below:
                            <br>
                            <figure><img src="img/project_1.png" alt="project structure" width="100%" height="100%"></figure>
                        </p>
                        <h3>Starting your component development</h3>
                        <p style="text-align:justify">The custom component service you just created is the equivalent to <i>"hello world"</i> often used in the world of programming. In the following, you are modifying the sample code to become the starter for the currency converter custom component.</p>
                        <ol>
                            <li style="text-align:justify">Open your JavaScript editor of choice.</li>
                            <li style="text-align:justify">In the JavaScript editor, open the <b>converterccs</b> folder as a new project
                                <figure><img src="img/jsedit_1.png" alt="JavaScript editor" width="80%" height="80%"></figure>
                                <br> <b>Note: </b>The above screenshot shows Microsoft Visual Studio Code. Microsoft Visual Studio Code supports opening folders on the file system as projects. If your JavaScript IDE does not support to open folders, then directly open the <code>CurrencyConverter.js</code> file located in the <i>converterccs/components</i> folder.</li>
                            <li style="text-align:justify">In the opened project folder, expand the <b>components</b> node and select the <code>CurrencyConverter.js</code>
                                <br>
                                <figure><img src="img/jsedit_2.png" alt="JS editor with opened component file" width="100%" height="100%"></figure>
                                
                            </li>
                            <li style="text-align:justify">Line 5 in above screenshot shows the following property definition: <b>name: 'CurrencyConverter'</b>. Change this definitions to <b>name: 'complete.training.CurrencyConverter'</b>.<br><br>
                                <b>Note:</b> Adding a prefix to the component name helps avoiding naming conflicts in Oracle Digital Assistant skills that have many component services from different developers configured.</li><br>
                            <li style="text-align:justify">In line 7, change the string <b>human</b> to <b>variable</b>.</li>
                            <li style="text-align:justify">Create a new line below line 7 and add the following code for the base currency:
                                <br>
                                <br><code>baseCurrency: { required: true, type: 'string' },</code></li>
                            <li style="text-align:justify">Create another new line for the target currencies. Add the following code:
                                <br>
                                <br><code>targetCurrencies: { required: true, type: 'string' },</code></li>
                            <li style="text-align:justify">Finally, create one more new line for the amount and add the following code:
                                <br>
                                <br><code> amount: { required: true, type: 'int'}</code></li>
                            <li style="text-align:justify">change the following code line
                                <br>
                                <br> <code>supportedActions: ['weekday', 'weekend']</code>
                                <br>
                                <br>to
                                <br>
                                <br><code>supportedActions: ['success', 'failure']</code></li>
                            <li style="text-align:justify">With these changes, the <b>metadata: ()</b> function should look as shown in the image below:
                                <br>
                                <figure><img src="img/jsedit_3.png" alt="metadata function with the applied changes" width="100%" height="100%"></figure>
                            </li>
                            <li style="text-align:justify">Next, change the code of the <b>invoke: (conversation, done)</b> function to look as shown in the image below. To save you some typing, you can obtain the code lines <a href="files/invoke_1.txt" target="_blank"><b>from here.</b></a>
                                <br>
                                <figure><img src="img/jsedit_4.png" alt="invoke function" width="100%" height="100%"></figure>
                            </li>
                        </ol>
                        <p style="text-align:justify"><b>What you just did: </b> The <i>metadata</i> function describes the custom component to Oracle Digital Assistant at design time. The name prefix you added to the generated component name helps avoiding the possibility of naming clashes with other custom components. </p>
                        <p style="text-align:justify">The component properties you added define the component's input parameters that the bot designer must provide values for when adding the component to a dialog flow. The <i>variable</i> property holds a reference to a dialog flow variable the bot designer created to hold the result object returned from the custom component.</p>
                        <p style="text-align:justify">The two supportedActions, <i>"success"</i> and <i>"failure"</i>, allow the custom component to indicate to the skill whether the currency conversion succeeded or not. The bot designer uses <i>supportedActions</i> in action transitions to conditionally continue the user-bot interaction based on the component outcome.</p>
                        <p style="text-align:justify">The code in lines 16, 17, 18 and 19 read the values for the required component input parameters. The input parameters are flagged as required in the metadata() definition, so that missing values cause a runtime exception when testing the bot. Because of this, there is no need to check for null values in the code (which you would need to if parameters were flagged as optional)</p>
                        <p style="text-align:justify">The <i>done()</i> function call invokes a callback that passes the component response back to the Oracle Digital Assistant skill the custom component is configured in. </p>
                        <h3>Adding your first logging statement</h3>
                        <ol>
                            <li>Edit line 20 shown in the image above and add the <a href="files/logstatement_1.txt" target="_blank"><b>following code</b></a> in a single line:
                                <br>
                                <br><code>conversation.logger().info("Input parameter values: variable: "+variable+", baseCurrency: "+baseCurrency+", targetCurrencies: "+targetCurrencies+", amount: "+amount);</code></li>
                        </ol>
                        <p style="text-align:justify"><b>Note: </b>The Oracle Digital Assistant custom component service SDK exposes a configurable logger. By default, logging is setup to use the <i>console logger</i>. This entry-level tutorial does not cover custom component debugging, so that logging is the option you use for tracking the custom component processing. The log statement you added prints the names and values of the component's input parameters.</p>
                        <h3>Building the fixer.io request URL</h3>                        
                        <ol>
                            <li style="text-align:justify">Create a new line under the <code>conversation.logger()</code> code line.</li>
                            <li style="text-align:justify">Add the <a href="files/converteruri.txt" target="_blank"><b>following code </b>lines.</a>                               
                                <pre>
var tmpTargetCurrencies = targetCurrencies+","+baseCurrency;
var fixerIoAPIKey = "&lt;replace with your api key&gt;"
var reqUrl = "http://data.fixer.io/api/latest?access_key="+fixerIoAPIKey + "&amp;base=EUR&amp;symbols=" + tmpTargetCurrencies;
conversation.logger().info("fixer.io request URL:"+reqUrl.replace(fixerIoAPIKey,"*********"));
                            </pre>                                
                            </li>
                            <li style="text-align:justify">The custom component's <b>invoke</b> function should now look as shown in the image below<br>
                                <figure><img src="img/jsedit_5.png" alt="component code"></figure>
                            </li>
                            <li style="text-align:justify"><b>Add</b> your fixer.io API key into <b>line 23</b>.</li>
                        </ol>
                        <p style="text-align:justify"><b>What you just did: </b> The free fixer.io subscription key only supports EUR as the base currency. To be able to use any currency as the base currency, the fixer.io request URL needs to contain the user provided base currency as an additional value for the target currency. The <code>replace(...)</code> function in the logging statement ensures that your fixer.io API key does not show in the log message.</p>
                        <h3>Adding the currency conversion code</h3>
                        <p style="text-align:justify">This tutorial uses the <i>request</i> Node.js module to access the fixer.io REST service. Because the <i>request</i> module is not part of the Node.js core installation, you need to install it first.</p>
                        <ol>                            
                            <li style="text-align:justify">Open the terminal window and navigate into the <b>converterccs</b> folder. </li>
                            <li style="text-align:justify">Type the following command and press the enter-key to install the <b>request </b> Node module:<br><br>
                            <code>npm install request</code><br>
                            <figure><img src="img/terminal_2.png" alt="request module installation" width="100%" height="100%"></figure>    
                            </li>
                            <li style="text-align:justify">Open your JavaScript editor.</li>
                            <li style="text-align:justify">Add the following code into line 2 (right under the <b>'use strict'</b> code line) to create a reference to the request module:<br><br>
                            <code>var request = require('request');</code><br></li>
                            <li style="text-align:justify">At the bottom of the file, add a new line <b>above</b> the <b>done();</b> function call.</li>
                            <li style="text-align:justify">Add the <a href="files/request_1.txt" target="_blank"><b>following code</b></a> lines that call the fixer.io remote REST service:<br></li>
                            <pre>
request(reqUrl, {json: true }, (err, res, body) => {

})
                            </pre>
                            <li style="text-align:justify">Your code should look as in the image below:<br>
                            <figure><img src="img/jsedit_6.png" alt="request call" width="100%" height="100%"></figure></li>
                            <li style="text-align:justify"><b>Remove</b>the <b>done();</b> code line (line 31 in above image). This code will be added in another location in the final currency conversion implementation. <br><br>
                                <b>Note:</b> Because the <code>done();</code> function call is so important, it is good practices to leave it in the generated code as a reminder until you know where to put it in your custom code.<br><br>
                            <b>What you just did and what's next:</b> You defined the basic outline of the <i>complete.training.CurrencyConverter</i> component. What's missing is the code that actually implements the conversion of a base currency amount into one or more target currencies. The code for this is provided for you. So next you will be adding the provided code to your custom component. 
                            
                            </li>                            
                            <li style="text-align:justify">Open <a href="files/converterimpl.txt" target="_blank"><b>this link</b></a> to open the <i>converterimpl.txt</i> text file that contains the currency converter implementation code-</li>
                            <li style="text-align:justify">Select all content and copy it to the clipboard (ctrl+c on Windows or command+c on MAC).</li>
                            <li style="text-align:justify">Place your mouse cursor into the <b>request function body</b> (line 29 in the image above).</li>
                            <li style="text-align:justify">Paste the code from the cliboard (ctrl+v on Windows or command+v on MAC).</li>
                            <li style="text-align:justify">Save your work.</li>
                            <li style="text-align:justify"><b>Compare</b> your custom component with <a href="files/completecode.txt" target="_blank"><b>this sample code</b></a>. </li>                            
                        </ol>
                        <p style="text-align:justify"><b>Note: </b> Let's pause for a few minutes to understand the implementation code you just added.<br><figure><img src="img/jsedit_7.png" alt="completed request function" width="100%" height="100%"></figure></p>
                        
                        <table class="body-table" style="text-align:justify" summary="This table ...">
                            <tr>
                                <th scope="col">Line</th>
                                <th scope="col">Description</th>
                            </tr>
                             <tr>
                                    <td scope="row">28</td>
                                    <td>This code line performs the REST call to the fixer.io website. It then calls and anonymous function to which it passes the response object (res), the response body (body) and, if existing, the error object (err).</td>
                             </tr>
                             <tr>
                                 <td scope="row">30</td>
                                 <td>If the REST service call succeeded, then a http status code of 200 is returned.</td>
                             </tr>
                             <tr>
                                 <td scope="row">31</td>
                                 <td>Still the response may contain an error, if, for example, the API key that was passed with the request is invalid. This line of code checks the response body for whether the conversion was successful or not.</td>                                 
                             </tr>
                            <tr>
                            <td scope="row">35</td>
                            <td>If the request returned conversion rates, then these are saved in an array within the response body. The returned body is a JSON object, so that the rates can be accessed from <i>body.rates</i>.</td>
                            </tr>
                            <tr>
                            <td scope="row">36</td>
                            <td>To work around one a limitation of the free fixer.io API key, which is that only <i>EUR</i> can be used as a base currency in the request, the base currency sent from the bot is added as a target currecncy. In this line of code, the base currency is removed from the conversation rates so that only target currencies get reported back to the bot.</td>
                            </tr>
                            <tr>
                            <td scope="row">37</td>
                            <td>Compute the converted amount for the current handled target currency. To get the conversion rate of the target currency  relative to the bot provided base currency (and not EUR), it is needed to divide the target currency rate by the base currency rate (which is the bot provided currency rate in relation to EUR). The currency symbol (e.g. USD), the conversion rate and the converted amount are saved to an object, which then gets added to an array.</td>
                            </tr>
                            <tr>
                            <td scope="row">47</td>
                            <td>This line, and the following, builds the response object that will be returned to the skill. The return object contains a <i>base</i> property that holds information about the base currency and a <i>conversion</i> property that contains all target currencies and their converted amounts.</td>
                            </tr>
                            <tr>
                            <td scope="row">54</td>
                            <td>The return object is saved to a dialog flow variable. The name of the dialog flow variable is provided by the bot designer using the custom component's <i>variable</i> property. In the following the custom component triggers navigation to the <i>success</i> transition action before calling <i>done()</i> to return the request to the bot.</td>
                            </tr>
                            <tr>
                            <td scope="row">59+69/</td>
                            <td>The code sections handle the case where the conversion was not successful (e.g. because of a missing API key) or where the response status code was not 200.</td>
                            </tr>
                         </table>
                        <p style="text-align:justify"><b>Note: </b>Intentionally, to this point, the tutorial does not explain the structure of the returned object. Later, when you wear the bot designer's hat, you will learn how to get to know the structure of custom component response data.</p>
                    </section>
                    <hr>
                    <section>
                        <h2 id="section_4" role="button" style="text-align: left;"><img src="img/32_4.png" alt="section 4" height="32" width="32" class="num_circ">Custom Component Packaging And Deployment</h2>
                        <p style="text-align:justify">You can deploy custom components either to a skill's local container, a remote Node server, or Oracle MobileHub. In this tutorial, you will deploy the custom component service you've built to the local container in a skill. For this, you first need to package the custom component service into a deployable file.</p>
                        <h3>Packaging the component project for deployment</h3>
                        <ol>
                            <li>Save your work in your JavaScript IDE.</li>
                            <li>Open a terminal window and navigate into to the <b>converterccs</b> folder.</li>
                            <li style="text-align:justify">In the <b>convertercss</b> folder, type <code>npm pack</code> as a command and press the <b>enter-key</b>. The command packages the Node project into a deployable tarball, <b>converterccs-1.0.0.tgz</b>.
                                <figure><img src="img/terminal_3.png" alt="npm pack command" width="100%" height="100%"></figure>
                                
                            </li>                                                        
                        </ol>
                        <h3>If in your own environment: Importing the tester skill</h3>
                        <p style="text-align:justify"><b>If you work in your own Oracle Digital Assistant instance</b>, then you can import the provided tester skill. In a shared or in a trainings environment, the starter skill most like exists already. In the latter case we recommend cloning the skill (explained in the nex step)</p>
                        <ol>
                            <li style="text-align:justify">If the tester skill does not exist, <a href="files/CurrencyConverterTester(1.0).zip" ><b>select this link</b></a> to download the <b>CurrencyConverterTester(1.0).zip></b>  skill.</li>
                            <li style="text-align:justify">Open the Oracle Digital Assistant dashboard in a browser using the following URL <b>&lt;your instance url&gt;/botsui</b>.</li>
                            <li style="text-align:justify">Select the menu icon at the top-left of the page next to the "Oracle Digital Asisstant" label (<img src="img/hamburger.png" alt="menu icon">). </li>
                            <li style="text-align:justify">Select the <b>Skills</b> option in the <b>Development</b> category.
                                <br>
                                <figure><img src="img/image_001.png" alt="Main Menu"></figure>
                            </li>
                            <li style="text-align:justify">Again, <b>click</b> on the menu icon at the top-left of the page to close the menu (<img src="img/hamburger.png" alt="menu icon">).</li>
                            <li style="text-align:justify">Click the <b>Import Skills</b> button on the top right (<img src="img/importSkillButton.png" height="25" alt="import skill button">).</li>                            
                            <li style="text-align:justify">On your computer, <b>browse</b> to the location you saved the dowloaded <b>CurrencyConverterTester(1.0).zip</b> file to.</li>
                            <li style="text-align:justify">Select the <b>CurrencyConverterTester(1.0).zip</b> file and click <b>Open</b> to upload and install the starter skill bot.</li>
                            <li style="text-align:justify">Locate the <b>CurrencyConverterTester</b> skill and open it by clicking on the <i>CurrencyConverterTester</i> tile.
                                <br>
                                <br><b>Note:</b> If you cannot find the <i>CurrencyConverterTester</i> skill, then try and use the filter field above the <i>New Skill</i> tile to find it. </li>
                        </ol>
                        <h3>If in a shared environment: Cloning the tester skill</h3>
                        <p style="text-align:justify"><b>If you follow this tutorial in a shared Oracle Digital Assistant instance</b>, like in a training, you should check first if the test skill already exists. If it does, <b>clone</b> the skill instead of importing it. The reason is that you can import a skill with a specific name only once.</p>
                        <ol>
                            <li style="text-align:justify">Open the Oracle Digital Assistant dashboard in a browser the following URL <b>&lt;your instance url&gt;/botsui.</b></li>
                            <li style="text-align:justify">Select the menu icon at the top-left of the page next to the "Oracle Digital Asisstant" label (<img src="img/hamburger.png" alt="menu icon">). </li>
                            <li style="text-align:justify">Select the <b>Skills</b> option in the <b>Development</b> category.
                                <br>
                                <figure><img src="img/image_001.png" alt="Main Menu"></figure>
                            </li>
                            <li style="text-align:justify"><b>Click</b> on the menu icon at the top-left of the page to close the menu (<img src="img/hamburger.png" alt="menu icon">).
                            <li style="text-align:justify">If you cannot spot the <i>CurrencyConverterTester</i> skill, then try and use the filter field above the <i>'New Skill'</i> tile to find it. If still you cannot find it, import the skill as explained in the previous section.</li>
                            <li style="text-align:justify">To clone the CurrencyConverterTester skill, use the <b>Clone</b> menu option of the <b>CurrencyConverterTester</b> skill shown in the image below.
                                <br>
                                <figure><img src="img/skill_01.png" alt="Cloning a skill"></figure>
                                <br>
                            </li>
                            <li style="text-align:justify">In the opened dialog, provide a display name with your initials in it (e.g. "FN_CurrencyConverterTester").</li>
                            <li style="text-align:justify">Provide a short description.</li>
                            <li style="text-align:justify">Create the clone and open it to continue this tutorial.</li>
                        </ol>
                    </section>
                    <h3>Deploying your custom component to the tester skill</h3>                    
                    <ol>
                      <li>In the currency converter test skill, select the <b>Components</b> icon (<img alt="Components icon" src="img/csutcomp_icon2.png" height="25"/>)</li>
                      <li style="text-align:justify">Click the <b>+ Service</b> button to open the  <i>Create Service</i> dialog (<img alt="+ Service button" src="img/plusServiceIcon.png" height="25"/>).</li>
                      <li style="text-align:justify">In the <b>Name</b> field, type <b>CurrencyConverter</b>.</li>
                      <li style="text-align:justify">As the <b>Description</b>, enter <b>fixer.io integration</b>.</li>
                      <li style="text-align:justify">Ensure <b>Embedded Container</b> is selected.</li>
                      <li style="text-align:justify">Locate the <b>converterccs-1.0.0.tgz</b> file in the <b>converterccs</b> folder on your file system.</li>
                      <li style="text-align:justify">Drag-and-drop the <b>converterccs-1.0.0.tgz</b> into the <i>Create Service</i> dialog's <b>Package File</b> field</li>
                      <li style="text-align:justify">Press the <b>Create</b> button.<br>
                        <figure><img src="img/componentServiceRegistration_2.png" alt="Component registration" width="100%" height="100%"></figure>
                        </li>
                      <li style="text-align:justify">Wait for the <b>Status</b> field to show <b>Ready</b>, which may take a few seconds<br>
                        <figure><img src="img/componentServiceRegistration_3.png" alt="Status showing deployment as ready" width="100%" height="100%"></figure></li>
                        <li style="text-align:justify">If not already, expand the <b>Currency Converter</b> header and select the <b>complete.training.CurrencyConverter</b> entry. Notice the component description to be the information you defined in the custom component's <i>metadata()</i> function:<br>
                        <figure><img src="img/componentServiceRegistration_4.png" alt="Component description" width="100%" height="100%"></figure>
                        </li>
                        <li style="text-align:justify">With the custom component service deployed to the skill bot's local container, you are now ready to test the component.</li>
                    </ol>                    
                    <hr>
                    <section>
                        <h2 id="section_5" role="button" style="text-align: left;"><img src="img/32_5.png" alt="section 5" height="32" width="32" class="num_circ">Custom Component Testing</h2>
                        <p style="text-align:justify">The tester skill bot dialog flow is already setup for testing. If you closely followed the steps in this tutorial, then the component name, the input parameter names and the action transition names match the names used in the <b>CurrencyConverterTester</b> dialog flow state of the tester skill. If you deviated from the tutorial, you must first apply the changes to the custom component reference in the flow.</p>
                        <p style="text-align:justify"><b>Note: </b> The tester flow uses a composite bag entity to guide users through the steps of providing a base currency, a conversion amount and one or many target currencies. Though the currency converter you built supports 170 currencies, the tester uses a reduced list.</p>
                        <p style="text-align:justify"><b>Note: </b>If you want to learn more about composite bag entities, try <a href="https://docs.oracle.com/en/cloud/paas/digital-assistant/tutorial-entities/index.html" target="_blank"><b>this tutorial</b></a>.</p>
                        <ol>
                            
                            <li style="text-align:justify">Open the dialog flow builder (<img alt="dialog flow editor" src="img/dialogEditor.png" height="25"/>).</li>
                            <li style="text-align:justify">Notice the <b>getConversion:</b> state in line 15. The <code>System.ResolveEntities</code> component accesses the <i>CONVERSION</i> composite bag entity through the <i>conversion</i> dialog flow variable that is referenced from the component's <i>variable</i> property. The <code>System.ResolveEntities</code> resolves the compoite bag entity, asking the user to provide a <b>base currency</b>, a <b>currency amount</b> and for one or many <b>target currencies.</b><br><br>
                            <b>Note:</b> This tutorial does not make use of the composite bag entity's out-of-order extraction functionality. Users will have to provide each information required to perform the currency onversion one-by-one.</li>
                            <li style="text-align:justify">The <b>converter:</b> state in line 23 references the custom component you built. The custom component input parameters reference the <i>conversion</i> variable to obtain their values. The result of the conversion is saved by the custom component into the <i>conversionResult</i> dialog flow variable</li>
                            <li style="text-align:justify">Open the embedded conversation tester (<img alt="launch conversation tester" src="img/testerIcon.png" height="25"/>).</li>
                            <li style="text-align:justify">Start by typing <b>hi</b>.</li>
                            <li style="text-align:justify">Select <b>CAD</b> as the base currency from the displayed list of currencies.</li>
                            <li style="text-align:justify">As an amount to convert type <b>100</b>.</li>
                            <li style="text-align:justify">When asked for the target currencies, type <b>4 5 9</b> and press the enter-key on your keyboard.<br>                            
                            <figure><img src="img/converterTesting_1.png" alt="Converter testing" width="100%" height="100%"></figure></li>
                            <li style="text-align:justify">As a result, you should see the bot response as shown in the image below:<br>
                                <figure><img src="img/converterTesting_2.png" alt="Conversion response" width="100%" height="100%"></figure>
                            </li>
                            <li style="text-align:justify">Reset the tester (<img alt="Reset" src="img/resetLink.png" height="25"/>).</li>
                            <li style="text-align:justify">type <b>hi</b>.</li>
                            <li style="text-align:justify">Select <b>USD</b> as the base currency. Note that you will have to press the <b>Show More</b> button twice for the <b>USD</b> symbol to show.</li>
                            <li style="text-align:justify">Type <b>100</b></li>
                            <li style="text-align:justify">Type <b>EUR CHF GBP</b> and press the enter-key. You should get a conversion quote similar to the one before.<br><br>
                            <b>Note: </b>By custom component design, selecting a target currency symbol that matches the base currency symbol will not display in the converter. </li><br>
                            <li style="text-align:justify">Reset the tester (<img alt="Reset" src="img/resetLink.png" height="25"/>) and <b>continue playing</b></li>
                            <li style="text-align:justify">When done with playing, <b>don't reset the tester</b> but keep the last results shown.</li>
                        </ol>                     
                    </section>
                        <section>
                    <h2 id="section_6" role="button" style="text-align: left;"><img src="img/32_6.png" alt="section 4" height="32" width="32" class="num_circ">Accessing component logs</h2>
                    <p style="text-align:justify">The custom component prints log messages from within its code (<code>conversation.logger().info(...)</code>. The log messages can be viewed in the <i>Components</i> registration panel.</p>
                    <ol>
                    <li style="text-align:justify">For this section it is important you did not reset the embedded component tester. If you did, please rerun a conversion test as otherwise there are no log messages to look at.</li>
                    <li style="text-align:justify">Select the <b>Components</b> menu item (<img alt="Component menu item" src="img/csutcomp_icon2.png" height="25"/>)</li>
                    <li style="text-align:justify">Select the <b>Diagnostics</b> list item and choose the <b>View Logs</b> option.<br>
                        <figure><img src="img/componentServiceRegistration_5.png" alt="Log Viewer" width="100%" height="100%"></figure></li>
                        <li style="text-align:justify">Log messages should be displayed similar to shown in the image below.<br>
                        <figure><img src="img/componentServiceRegistration_6.png" alt="Logs written by converter" width="100%" height="100%"></figure><br>
                        <b>Notice </b>the following log message:<br><br> <i>access_key=*********&base=EUR&symbols=CHF,CNY,INR,CAD</i>.<br><br> Instead of printing the access credential, the custom component code masks the information, so it is not disclosed. This masking is part of the custom component code you edited.</li>
                    </ol>
                    </section>
                        <section>
                    <h2 id="section_7" role="button" style="text-align: left;"><img src="img/32_7.png" alt="section 4" height="32" width="32" class="num_circ">Expert Tip</h2>
                    <p style="text-align:justify">This tutorial did not explain the custom component response data structure when creating the custom component or exploring the BotML content of the dialog flow. So a general question is, how do you know what is in a component response? For example, how would you know that the <i>conversionResult</i> variable can be used as shown in the dialog flow editor lines 39 - 44? Thus, the expert tip to share here is to use the conversation tester.</p>    
                    <ol>
                    <li style="text-align:justify">Go back to the embedded tester.</li>
                    <li style="text-align:justify">Reset the tester (<img alt="Reset" src="img/resetLink.png" height="25"/>).</li>
                    <li style="text-align:justify">Type <b>hi</b>.</li>
                    <li style="text-align:justify">Select a base currency.</li>
                    <li style="text-align:justify">Provide a value for the amount.</li>
                    <li style="text-align:justify">Select one or many target currencies.</li>
                    <li style="text-align:justify">Have a look at the <b>Variables</b> section displayed on the right side of the embedded tester:<br>
                        <figure><img src="img/converterTesting_3.png" alt="Variables view" width="100%" height="100%"></figure></li>   
                    <li style="text-align:justify">Fully expand the <b>conversionResult</b> variable to see the structure of the data object as shown in the image below.<br>
                        <figure><img src="img/converterTesting_4.png" alt="expanded variables" width="100%" height="100%"></figure></li>                        
                    </ol>
                            <p style="text-align:justify"><b>Tip-Summary: </b>To learn about the structure of a data object returned by a custom component, stop after processing the custom component and use the <i>Variables</i> section in the <i>Conversation</i> tab of the embedded tester to explore the variable content.</p>
                    
                    </section>
                </article>
            </div>
            <br class="clearfloat">
        </div>
    </div>
    <!--close main-->
    <!--end content-->
    <div class="footer-container ">
        <div style="max-width: 994px; padding:10px 0 0 17px;">
            <footer class="footer-list">
                <ul>
                    <li> <a href="https://www.oracle.com/corporate/index.html" target="_blank">About Oracle</a> </li>
                    <li> <a href="https://www.oracle.com/us/corporate/contact/index.html" target="_blank">Contact Us</a> </li>
                    <li> <a href="https://www.oracle.com/us/legal/index.html" target="_blank">Legal Notices</a> </li>
                    <li> <a href="https://www.oracle.com/us/legal/terms/index.html" target="_blank">Terms of Use</a> </li>
                    <li> <a href="https://www.oracle.com/us/legal/privacy/index.html" target="_blank">Your Privacy Rights</a> </li>
                    <li> <a href="https://www.oracle.com/pls/topic/lookup?ctx=cpyr&id=en">Copyright © 2018, Oracle and/or its affiliates. All rights reserved.</a></li>
                </ul>
            </footer>
        </div>
        <script type="text/javascript" src="https://www.oracleimg.com/us/assets/metrics/ora_docs.js"></script>
    </div>
    <!-- OBE Dialog Box code 10/15/2018 -->
    <!-- DO NOT ALTER THE CODE BELOW   -->
    <div id="lpModal" class="modal">
        <!-- Modal hdr and body -->
        <div id="obe_dialog" class="modal-content">
            <div class="modal-header">
                <a href="#" class="close"> <span class="close">&times;</span> </a>
                <h1>Associated Learning Paths</h1>
            </div>
            <div id="dialog-content"> </div>
            <div id="dialog-close" class="closeBtn">
                <a href="#" class="close2">
                    <p class="close2"> <span>&nbsp;&nbsp;View&nbsp;&nbsp;</span> </p>
                </a>
            </div>
        </div>
    </div>
    <!-- END OBE Dialog Box code -->
</body>

</html>
