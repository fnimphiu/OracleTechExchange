#metadata: information about the flow
#  platformVersion: the version of the bots platform that this flow was written to work with 
metadata:
  platformVersion: "1.0"
main: true
name: DentalCare
#context: Define the variables which will used throughout the dialog flow here.
context:
  variables:
    patientName: "string"
    appointmentTime: "string"  
    iResult: "nlpresult"    

states:  
  intent:
    component: "System.Intent"
    properties:
      variable: "iResult"
    transitions:
      actions:
        WelcomeMessage: "welcomemessage"
        CancelAppointment: "cancelappointment"
        ConfirmAppointment: "confirmappointment"
        RescheduleAppointment: "rescheduleappointment"
        unresolvedIntent: "unresolved"    
        
  welcomemessage:
    component: "System.Output"
    properties:
      text: "Hi, I am the Dental Care appointment reminder bot!"
    transitions:
      return: "done"
      
  cancelappointment:
    component: "System.Output"
    properties:
      text: "No worries, we are cancelling your current slot."
    transitions:
      return: "done" 
      
  confirmappointment: 
    component: "System.Output"
    properties:
      text: "Thank you so much for confirming!"
    transitions:
      return: "done" 
      
  rescheduleappointment: 
    component: "System.Output"
    properties:
      text: "Sure. I can set up a new appointment for next week, same day and time."
    transitions:
      return: "done"         
      
  remindermessage:
    component: "System.Output"
    properties:
      text: "Hi ${patientName.value}, your next Dental Care appointment is scheduled for ${appointmentTime.value}. Please reply to this message to confirm, cancel, or postpone your appointment."
    transitions:
      return: "done"
      
  unresolved: 
    component: "System.Output"
    properties:
      text: "I am sorry, I could not understand, let's try again"
    transitions:
      return: "intent"